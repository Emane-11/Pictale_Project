{% extends "pictale_app/base.html" %}

{% block content %}
<div class="container" style="max-width: 800px;">
    <h2 style="text-align: center; color: #444; margin-bottom: 30px;">Photo Recommendations</h2>

    <form method="post" enctype="multipart/form-data" style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 40px;">
        {% csrf_token %}
        <div style="margin-bottom: 20px;">
            <label for="title" style="display: block; margin-bottom: 8px; font-weight: 600; color: #555;">Photo Title</label>
            <input type="text" name="title" id="title" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; box-sizing: border-box;" required>
        </div>
        <div style="margin-bottom: 20px;">
            <label for="story" style="display: block; margin-bottom: 8px; font-weight: 600; color: #555;">Story</label>
            <textarea name="story" id="story" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; box-sizing: border-box; min-height: 100px; resize: vertical;" required></textarea>
        </div>
        <div style="margin-bottom: 20px;">
            <label for="image_file" style="display: block; margin-bottom: 8px; font-weight: 600; color: #555;">Upload Photo (optional)</label>
            <input type="file" name="image_file" id="image_file" style="width: 100%;" class="form-control">
        </div>
        <button type="submit" class="button button-primary" style="width: 100%;">Submit Recommendation</button>
    </form>

    <h4 style="color: #444; margin-bottom: 20px;">My Submissions</h4>
    {% if recommendations %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
            {% for rec in recommendations %}
                <div style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    {% if rec.image_file %}
                        <img src="{{ rec.image_file.url }}" style="width: 100%; height: 200px; object-fit: cover; display: block;" alt="{{ rec.title }}">
                    {% else %}
                        <img src="https://via.placeholder.com/300x200" style="width: 100%; height: 200px; object-fit: cover; display: block;">
                    {% endif %}
                    <div style="padding: 15px;">
                        <h5 style="margin-top: 0; color: #007bff; font-size: 1.1em;">{{ rec.title }}</h5>
                        <p style="font-size: 0.9em; color: #666; margin-bottom: 10px;">{{ rec.story|truncatewords:20 }}</p>
                        <p style="font-size: 0.8em; color: #888; line-height: 1.5;">
                            Status: <strong style="color: #333;">{{ rec.status|title }}</strong><br>
                            Submitted on {{ rec.created_at|date:"M d, Y" }}
                        </p>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="color: #888; text-align: center;">No recommendations submitted yet.</p>
    {% endif %}
    <style>
        .button-primary {
            background-color: #007bff;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .button-primary:hover {
            background-color: #0056b3;
        }
    </style>
</div>
{% endblock %}
